<gt-table-spinner *ngIf="(working$ | async) as working; else pageContent"></gt-table-spinner>

<ng-template #pageContent>
    <div class="ui-g">
      <div class="ui-g-12" *ngIf="(hikeProgramState$ | async) as hikeProgramState">
        <div class="f-left">
          <strong>State:</strong> {{hikeProgramState}}
        </div>
        <div class="f-right">
          <p-button
            label="Publish"
            styleClass="ui-button-success"
            (onClick)="updateHikeState(EObjectState.published)"
            title="Publish hike"
            *ngIf="paramsId && hikeProgramState === EObjectState.draft"
          ></p-button>

          <p-button
            label="Draft"
            styleClass="ui-button-secondary"
            (onClick)="updateHikeState(EObjectState.draft)"
            title="Move to draft"
            *ngIf="paramsId && hikeProgramState === EObjectState.archived"
          ></p-button>

          <p-button
            label="Archive"
            styleClass="ui-button-danger"
            (onClick)="updateHikeState(EObjectState.archived)"
            title="Archive hike"
            *ngIf="paramsId && hikeProgramState === EObjectState.published"
          ></p-button>

          <p-button
            label="Save hike"
            styleClass="ui-button-success ml-5"
            (onClick)="saveHike()"
            [disabled]="!(allowSave$ | async)"
          ></p-button>
        </div>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="General info">
          <gt-hike-edit-general-info></gt-hike-edit-general-info>
        </p-card>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="Map">
          <gt-hike-edit-map></gt-hike-edit-map>
        </p-card>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="Hike outline">
          <gt-hike-edit-outline></gt-hike-edit-outline>
        </p-card>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="Route planning">
          <gt-hike-edit-route-planner [isPlanning$]="isPlanning$"></gt-hike-edit-route-planner>
        </p-card>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="Pois">
          <gt-hike-edit-pois [isPlanning$]="isPlanning$"></gt-hike-edit-pois>
        </p-card>
      </div>
    </div>

    <div class="ui-g">
      <div class="ui-g-12">
        <p-card title="Photos">
          <gt-hike-edit-photos
            [backgroundImageSelector]="backgroundImageSelector"
            [backgroundImageUrlSelector]="backgroundImageUrlSelector"
            [clickActions]="clickActions"
          ></gt-hike-edit-photos>
        </p-card>
      </div>
    </div>

</ng-template>
